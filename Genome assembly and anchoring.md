# Genome Assembly and Chromosome Scaffolding Pipeline

This repository contains a standard workflow for *de novo* genome assembly using **hifiasm** followed by reference-guided scaffolding (chromosome anchoring) using **RagTag**.

## 1. Environment Setup

We recommend using **Conda** to manage the required dependencies. The following command creates a dedicated environment and installs the necessary tools from the `bioconda` channel.

```bash
# Create the environment and install tools
conda create -n genome_env -c bioconda -c conda-forge \
    hifiasm \
    ragtag \
    samtools \
    -y

# Activate the environment
conda activate genome_env

```

---

## 2. De Novo Assembly

Using **hifiasm** to assemble PacBio HiFi reads into high-quality contigs.

```bash
###### Step 1: Assembly using hifiasm
hifiasm -o CG70.hifiasm.com -t 80 \
    /bioinfo/guanjt/PanGenome.dir/Data.dir/Buce.20231017.dir/CG70.hifi_reads.bam.fasta.gz

###### Step 2: Convert GFA to FASTA
# This extracts the primary contigs (p_ctg) from the GFA output
awk '/^S/{print ">"$2;print $3}' CG70.hifiasm.com.bp.p_ctg.gfa > CG70.hifiasm.com.bp.p_ctg.fa

```

**Parameters:**

* `-o`: Prefix for output files.
* `-t`: Number of CPU threads (80 in this case).

---

## 3. Chromosome Anchoring (Scaffolding)

Using **RagTag** to orient and order the assembled contigs based on a reference genome.

```bash
###### Step 3: Reference-guided scaffolding
ragtag.py scaffold \
    -o CG110.ragtag.dir \
    -f 1000 \
    -q 10 \
    -t 40 \
    NearC.V1.fa \
    /vol2/GuanJianTao/PanGenome.dir/Ragtag.dir/CG110.hifiasm.com.bp.p_ctg.fa

```

**Parameters:**

* `-o`: Output directory.
* `-f`: Minimum contig length to consider (1000 bp).
* `-q`: Minimum mapping quality (10).
* `-t`: Number of CPU threads (40).
* `NearC.V1.fa`: The reference genome used as a guide.

---

## 4. Output Files

| File | Description |
| --- | --- |
| `CG70.hifiasm.com.bp.p_ctg.fa` | Primary contigs generated by hifiasm. |
| `CG110.ragtag.dir/ragtag.scaffold.fasta` | Final scaffolded genome (chromosome-level). |
| `CG110.ragtag.dir/ragtag.scaffold.stats` | Statistics of the scaffolding process. |


